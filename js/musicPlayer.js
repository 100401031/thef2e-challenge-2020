!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([,function(t,e){var i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n);var r,o=null;window.onYouTubeIframeAPIReady=function(){o=new YT.Player("yt-iframe-player",{height:"0",width:"0",videoId:"H7pOrQEnc3c",playerVars:{controls:0},events:{onReady:r.onPlayerReady,onStateChange:r.onPlayerStateChange}})},$((function(){r=new Vue({el:"#app",data:{currentPlayList:{},playingPlayList:null,currentSong:null,isCued:!1,isPlaying:!1,isPause:!1,isBuffering:!1,isEnded:!1,currentTime:0,durationTime:0,loadedFraction:0,playingTimer:null,loadingTimer:null,sidebarHide:!1,playerState:null,screenWidth:document.body.clientWidth,listPauseHover:!1,volume:50,preVolume:null,randomMode:!1,randomPreviousSong:[],favoriteList:[],favoritePlaylist:{title:"我的最愛",song:[]},playList:{}},watch:{playerState:function(t){this.isBuffering=!1,this.isEnded=!1,this.isCued=!1,t==YT.PlayerState.CUED?this.isCued=!0:t==YT.PlayerState.PLAYING?(this.isPlaying=!0,this.isPause=!1):t==YT.PlayerState.PAUSED?(this.isPause=!0,this.isPlaying=!1):t==YT.PlayerState.ENDED?(this.isEnded=!0,this.playNextSong()):t==YT.PlayerState.BUFFERING?this.isBuffering=!0:(this.isPause=!1,this.isPlaying=!1)},isPlaying:function(t){t?(this.setPlayerTimer(),this.durationTime=o.getDuration()):this.clearPlayerTimer()},playingPlayList:function(t,e){t!=e&&(this.randomPreviousSong=[])}},computed:{cdRotate:function(){return(this.isPlaying||this.isPause)&&!this.isEnded},playPercentage:function(){return parseFloat((this.currentTime/this.durationTime).toFixed(4))||0},loadingPercentage:function(){return parseFloat(this.loadedFraction.toFixed(3))},currentPlayListSong:function(){return this.currentPlayList.song||[]},isCurrentPlayFavorite:function(){var t=this;return!!this.currentSong&&this.favoriteList.some((function(e){return e.videoId==t.currentSong.videoId}))}},methods:{onPlayerReady:function(){this.volume=o.getVolume()},setVolume:function(t){this.volume=t.target.value,o.setVolume(this.volume)},muteVolume:function(){this.volume>0?(this.preVolume=this.volume,this.volume=0):this.volume<1&&this.preVolume&&(this.volume=this.preVolume,this.preVolume=null),o.setVolume(this.volume)},onPlayerStateChange:function(t){this.playerState=t.data},setCurrentPlaylist:function(t){this.currentPlayList="favorite"!==t?this.playList[t]:this.favoritePlaylist},setCurrentSong:function(t){this.currentSong=t,o.cueVideoById({videoId:this.currentSong.videoId}),this.currentTime=0,this.durationTime=0,this.loadedFraction=0},playCurrentSong:function(t){this.setCurrentSong(t),this.setCdCoverImg(t.coverImgFileName),this.playingPlayList=this.currentPlayList,o.playVideo()},playNextSong:function(){if(this.randomMode)return this.randomPreviousSong.push(this.currentSong),void this.playRandomSong();var t=this.currentPlayList.song.indexOf(this.currentSong);t+1===this.currentPlayList.song.length?this.playCurrentSong(this.currentPlayList.song[0]):this.playCurrentSong(this.currentPlayList.song[t+1])},playPreviousSong:function(){if(this.randomMode){var t=this.randomPreviousSong.length;0===t?o.seekTo(0):(this.playCurrentSong(this.randomPreviousSong[t-1]),this.randomPreviousSong.splice(-1,1))}else{var e=this.currentPlayList.song.indexOf(this.currentSong),i=this.currentPlayList.song.length-1;0===e?this.playCurrentSong(this.currentPlayList.song[i]):this.playCurrentSong(this.currentPlayList.song[e-1])}},playRandomSong:function(){var t=this.currentPlayList.song.indexOf(this.currentSong),e=this.currentPlayList.song.length;this.playCurrentSong(this.currentPlayList.song[function i(){var n=Math.floor(Math.random()*e);return n===t?i():n}()])},toggleRandomMode:function(){this.randomMode=!this.randomMode,this.randomPreviousSong=[]},setCdCoverImg:function(t){var e="url('./image/MusicPlayer/albumCover/".concat(t,"')");document.getElementById("cd").style.backgroundImage=e},setPlayerTimer:function(){var t=this;this.currentTime=o.getCurrentTime(),this.loadedFraction=o.getVideoLoadedFraction(),this.playingTimer=setInterval((function(){t.buffer||(t.currentTime=o.getCurrentTime())}),1e3/29),this.loadingTimer=setInterval((function(){t.loadedFraction=o.getVideoLoadedFraction()}),5e3)},clearPlayerTimer:function(){clearInterval(this.playingTimer),clearInterval(this.loadingTimer)},handleCollapse:function(){this.sidebarHide=!this.sidebarHide},changeCurrentTime:function(t){var e=this;this.buffer=setTimeout((function(){clearTimeout(e.buffer),e.buffer=null}),1e3),this.currentTime=t.target.value,o.seekTo(t.target.value)},handlePlayBtn:function(){this.isPause||this.isEnded?o.playVideo():o.pauseVideo()},addToFavorite:function(t){var e=this.favoriteList.find((function(e){return e.videoId==t.videoId}));if(e){var i=this.favoriteList.indexOf(e);this.favoriteList.splice(i,1)}else this.favoriteList.push(t);var n=JSON.stringify(this.favoriteList);localStorage.setItem("favoriteList",n)},isListSongFavorite:function(t){return this.favoriteList.some((function(e){return e.videoId==t.videoId}))}},filters:{timeFormat:function(t){var e=parseInt(t/60)||0,i=parseInt(t)%60||0;return"".concat(e,":").concat(i>9?i:"0"+i)}},created:function(){var t=this,e=JSON.parse(localStorage.getItem("favoriteList"))||[];this.favoriteList=e,this.favoritePlaylist.song=this.favoriteList,$.getJSON("./json/MusicPlayer/playlist.json",(function(e){t.playList=e,t.setCurrentPlaylist(Object.keys(t.playList)[0])}))}})}))}]);
//# sourceMappingURL=musicPlayer.js.map