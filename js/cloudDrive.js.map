{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./source/js/cloudDrive.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","vm","Vue","el","data","sidebarDropdownVisible","fileNavDropdownVisible","storage_size","storage_usage","searchInput","searchResult","dataStorage","rootFolder","id","editable","modifiedTime","size","ownerId","fileType","fileList","isStar","childrenFolder","path","trash","star","starFileId","lastSection","currentSection","currentFolder","preFolderNav","folderNav","preventRecord","dragoverItem","rightClickItem","isDraggingItem","newFolderName","fileDropdownVisible","computed","displayfolderNav","this","length","newArray","slice","newDisplayfolderNav","concat","splice","storeUsagePercentage","displayFileList","searchFilter","searchFile","watch","handler","newVal","oldVal","push","editableFolder","$nextTick","$","removeClass","addClass","result","methods","folder","filter","item","includes","forEach","filterStarFile","handleClickOutside","e","elName","getAttribute","handleListItemDblClick","isInTrash","handleNavToFolder","target","targetIndex","findIndex","createFolder","newFolder","_creatUuid","Date","getTime","saveToLocalStorage","dragStart","dragEnd","dragOver","targetElem","dragLeave","drop","srcItem","targetItem","moveDriveFile","handleUploadFile","dataTransfer","files","uploadByInput","file","targetFolder","receiveFile","type","alert","convertFile","then","fileId","fileName","newFile","lastModified","checkFileType","saveToLocal","JSON","stringify","localStorage","catch","err","console","log","indexOfItem","indexOf","indexInList","Promise","resolve","reject","reader","FileReader","onload","onerror","error","readAsDataURL","stringData","setItem","download","decodeData","parse","getItem","a","document","createElement","href","setAttribute","click","activeUploadInput","$refs","fileInput","moveToTrash","delFile","find","delFileIndex","saveToLocalTrash","deleteFile","removeItem","recycleItem","pathArray","split","current","childFolder","indexOfDelItem","now","performance","replace","Math","random","floor","toString","fileContextMenu","addStar","findObj","obj","index","starPage","storeData","trashData","filters","timeFormat","timestamp","date","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","substr","sizeFormat","bytes","decimals","isNaN","k","dm","sizes","parseFloat","pow","toFixed","created","starFile","getStoreData","getTrashData","mounted","directives","binding","vnode","clickOutsideEvent","event","contains","context","expression","body","addEventListener","unbind","removeEventListener","contextMenu","selector","items","upload","callback","createNewFolder","modal","recycle","delete"],"mappings":"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","file":"cloudDrive.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","var vm;\nvm = new Vue({\n  el: '#app',\n  data: {\n    sidebarDropdownVisible: false,\n    fileNavDropdownVisible: false,\n    storage_size: 5000000,\n    storage_usage: 0,\n    searchInput: '',\n    searchResult: [],\n    dataStorage: {\n      rootFolder: {\n        id: 'root',\n        name: '我的雲端硬碟',\n        editable: true,\n        modifiedTime: '',\n        size: '',\n        ownerId: 'me',\n        fileType: 'folder',\n        fileList: [\n          {\n            id: '#1-f',\n            name: 'Hello World!',\n            editable: true,\n            isStar: false,\n            modifiedTime: 1598047432044,\n            size: '',\n            ownerId: 'me',\n            fileType: 'folder',\n            childrenFolder: [],\n            fileList: [],\n            path: '/root'\n          }\n        ],\n        path: ''\n      },\n      trash: {\n        id: 'trash',\n        name: '垃圾桶',\n        editable: false,\n        modifiedTime: '',\n        size: '',\n        ownerId: 'me',\n        fileType: 'folder',\n        fileList: []\n      },\n      star: {\n        id: 'star',\n        name: '已加星號',\n        editable: false,\n        modifiedTime: '',\n        size: '',\n        ownerId: 'me',\n        fileType: 'folder',\n        fileList: []\n      }\n    },\n    starFileId: [],\n    lastSection: null,\n    currentSection: null,\n    currentFolder: null,\n    preFolderNav: [],\n    folderNav: [],\n    preventRecord: false,\n    dragoverItem: null,\n    rightClickItem: null,\n    isDraggingItem: null,\n    newFolderName: '新文件夾',\n    fileDropdownVisible: false\n  },\n  computed: {\n    displayfolderNav() {\n      if (this.folderNav.length > 3) {\n        const newArray = this.folderNav.slice(1, -1);\n        const newDisplayfolderNav = [].concat(this.folderNav);\n        newDisplayfolderNav.splice(1, this.folderNav.length - 2, newArray);\n        return newDisplayfolderNav;\n      } else {\n        return this.folderNav;\n      }\n    },\n    storeUsagePercentage() {\n      return (this.storage_usage / this.storage_size) * 100;\n    },\n    displayFileList() {\n      return this.currentFolder.fileList;\n    },\n    searchFilter() {\n      if (this.searchInput != '') {\n        const result = this.searchFile(this.dataStorage.rootFolder, this.searchInput);\n        return result;\n      } else return [];\n    }\n  },\n  watch: {\n    currentFolder: {\n      handler(newVal, oldVal) {\n        if (oldVal && !this.preventRecord) {\n          if (\n            newVal.id == 'root' ||\n            newVal.id == 'trash' ||\n            newVal.id == 'search' ||\n            newVal.id == 'star'\n          ) {\n            this.folderNav = [];\n            this.folderNav.push(newVal);\n          } else {\n            //將資料夾路徑紀錄至folderNav\n            this.folderNav.push(newVal);\n          }\n          if (newVal.editable) {\n            this.editableFolder = true;\n          } else {\n            this.editableFolder = false;\n          }\n        }\n        if (\n          newVal.id == 'root' ||\n          newVal.id == 'trash' ||\n          newVal.id == 'search' ||\n          newVal.id == 'star'\n        ) {\n          if (oldVal) {\n            this.lastSection = this.currentSection;\n          }\n          this.currentSection = newVal.id;\n        }\n        this.$nextTick(() => {\n          if (this.lastSection) {\n            $('.table_wrapper').removeClass(this.lastSection);\n          }\n          $('.table_wrapper').addClass(this.currentSection);\n        });\n      }\n    },\n    dragoverItem() {\n      //TODO: 目前class被改動就會影響到contextmenu的判斷，應將contextmenu改為vue內data驅動\n      this.$nextTick(() => {\n        if (this.lastSection) {\n          $('.table_wrapper').removeClass(this.lastSection);\n        }\n        $('.table_wrapper').addClass(this.currentSection);\n      });\n    },\n    searchFilter(newVal) {\n      const result = {\n        id: 'search',\n        name: '搜尋結果',\n        editable: false,\n        modifiedTime: '',\n        size: '',\n        ownerId: 'me',\n        fileType: 'folder',\n        fileList: newVal,\n        path: ''\n      };\n      this.currentFolder = result;\n      if (this.searchInput == '') {\n        this.currentFolder = this.dataStorage.rootFolder;\n      }\n    }\n  },\n  methods: {\n    searchFile(folder, searchInput) {\n      const result = [];\n      const filter = folder.fileList.filter(item => item.name.includes(searchInput));\n      filter.forEach(item => {\n        result.push(item);\n      });\n      const childrenFolder = folder.fileList.filter(item => item.fileType == 'folder');\n      //是否有下一層\n      if (childrenFolder.length > 0) {\n        childrenFolder.forEach(item => {\n          //回傳結果再push進result\n          this.searchFile(item, searchInput).forEach(item => {\n            result.push(item);\n          });\n        });\n      }\n      return result;\n    },\n    filterStarFile(folder) {\n      const result = [];\n      const filter = folder.fileList.filter(item => item.isStar === true);\n      filter.forEach(item => {\n        result.push(item);\n      });\n      const childrenFolder = folder.fileList.filter(item => item.fileType == 'folder');\n      //是否有下一層\n      if (childrenFolder.length > 0) {\n        childrenFolder.forEach(item => {\n          //回傳結果再push進result\n          this.filterStarFile(item).forEach(item => {\n            result.push(item);\n          });\n        });\n      }\n      return result;\n    },\n    handleClickOutside(e, el) {\n      const elName = el.getAttribute('el-name');\n      this[`${elName}Visible`] = false;\n    },\n    handleListItemDblClick(item) {\n      if (item.isInTrash) return;\n      if (item.fileType === 'folder') {\n        this.currentFolder = item;\n      } else {\n        //TODO 待新增檔案預覽功能\n      }\n    },\n    handleNavToFolder(target) {\n      if (target === this.currentFolder) return;\n      //找到物件nav index 刪除它後面紀錄\n      const targetIndex = this.folderNav.findIndex(item => item.id == target.id);\n      this.folderNav.splice(targetIndex);\n      //防止watch時把此動作記錄下來\n      this.preventRecord = true;\n      this.currentFolder = target;\n      this.preventRecord = false;\n    },\n    createFolder(name = '新文件夾') {\n      this.sidebarDropdownVisible = false;\n      const newFolder = {\n        id: this._creatUuid(),\n        name,\n        editable: true,\n        isStar: false,\n        modifiedTime: new Date().getTime(),\n        size: '',\n        ownerId: 'me',\n        fileType: 'folder',\n        fileList: [],\n        path: this.currentFolder.path + '/' + this.currentFolder.id\n      };\n      this.currentFolder.fileList.push(newFolder);\n      //save to local\n      this.saveToLocalStorage();\n      this.newFolderName = '新文件夾';\n    },\n    //拖曳開始，設定目前拖曳中元素\n    dragStart(e, item) {\n      if (!this.currentFolder.editable) return;\n      this.isDraggingItem = item;\n      $('.table_wrapper').addClass('draggedTable');\n    },\n\n    //拖曳結束，清除拖曳及目標元素\n    dragEnd(e, item) {\n      this.isDraggingItem = null;\n      this.dragoverItem = null;\n      $('.table_wrapper').removeClass('draggedTable');\n    },\n    //設定目前拖曳目標\n    dragOver(targetElem) {\n      if (!this.currentFolder.editable) return;\n      if (\n        !this.dragoverItem &&\n        !targetElem.fileList.includes(this.isDraggingItem) &&\n        targetElem != this.isDraggingItem\n      ) {\n        this.dragoverItem = targetElem;\n      }\n    },\n    //若拖曳離開目前目標元素，則將目標元素設定為null\n    dragLeave() {\n      if (!this.currentFolder.editable) return;\n      this.dragoverItem = null;\n    },\n    //拖曳檔案被移動至目標元素中\n    drop(e, targetElem) {\n      if (!this.currentFolder.editable) return;\n      let srcItem = this.isDraggingItem;\n      let targetItem = this.dragoverItem;\n      //判斷是否為Drive上既有檔案，若true則進行搬移\n      if (srcItem) {\n        //若拖曳檔案與目標檔案相同則return\n        if (srcItem == targetItem || !targetItem) return;\n        else this.moveDriveFile(srcItem, targetItem);\n        targetItem = null;\n        return;\n      }\n      //判斷是否為Drive上既有檔案，若false則將檔案存至local並將檔案資訊加入隸屬檔案夾物件\n      this.handleUploadFile(e.dataTransfer.files, targetElem);\n      this.dragoverItem = null;\n    },\n    uploadByInput(e) {\n      if (!this.currentFolder.editable) return;\n      this.handleUploadFile(e.target.files, this.currentFolder);\n      this.sidebarDropdownVisible = false;\n    },\n    //處理上傳檔案\n    handleUploadFile(file, targetFolder) {\n      for (let i = 0; i < file.length; i++) {\n        const receiveFile = file[i];\n        if (receiveFile.type == '') {\n          alert(`「${receiveFile.name}」格式錯誤，目前暫不支援上傳此種格式。`);\n          return;\n        }\n        if (receiveFile.size > 3890704) {\n          alert(\n            `「${receiveFile.name}」檔案太大囉，由於是存入localStorage，建議測試檔案小於3.8MB。`\n          );\n          return;\n        }\n        this.convertFile(receiveFile)\n          .then(data => {\n            const fileId = this._creatUuid();\n            const fileName = receiveFile.name;\n            const newFile = {\n              id: fileId,\n              name: fileName,\n              isStar: false,\n              modifiedTime: receiveFile.lastModified,\n              size: receiveFile.size,\n              ownerId: 'me',\n              fileType: this.checkFileType(receiveFile.type),\n              path: this.currentFolder.path + '/' + this.currentFolder.id\n            };\n            targetFolder.fileList.push(newFile);\n            this.saveToLocal(data, fileId, fileName);\n            this.storage_usage = JSON.stringify(localStorage).length * 0.77;\n            //save to local\n            this.saveToLocalStorage();\n          })\n          .catch(err => {\n            console.log('err', err);\n          });\n      }\n    },\n    //Drive檔案搬移\n    moveDriveFile(srcItem, targetItem) {\n      if (srcItem.fileType != 'folder' && targetItem.fileType == 'folder') {\n        const indexOfItem = this.currentFolder.fileList.indexOf(srcItem);\n        targetItem.fileList.push(srcItem);\n        this.currentFolder.fileList.splice(indexOfItem, 1);\n        //save to local\n        this.saveToLocalStorage();\n      } else if (srcItem.fileType == 'folder' && targetItem.fileType == 'folder') {\n        const indexInList = this.currentFolder.fileList.indexOf(srcItem);\n        //加入\n        targetItem.fileList.push(srcItem);\n        //移出\n        this.currentFolder.fileList.splice(indexInList, 1);\n        //save to local\n        this.saveToLocalStorage();\n      }\n    },\n    checkFileType(fileType) {\n      console.log(fileType);\n      if (fileType.includes('mp4')) return 'mp4';\n      if (fileType.includes('image')) return 'image';\n      if (\n        fileType.includes('msword') ||\n        fileType.includes('application/vnd.openxmlformats-officedocument.wordprocessingml.document')\n      )\n        return 'msword';\n      if (fileType.includes('pdf')) return 'pdf';\n      else return 'default';\n    },\n    convertFile(file) {\n      return new Promise((resolve, reject) => {\n        let reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result);\n        };\n        reader.onerror = () => {\n          reject(reader.error);\n        };\n        reader.readAsDataURL(file);\n      });\n    },\n    saveToLocal(data, fileId, fileName) {\n      const newFile = { data, fileId, fileName };\n      const stringData = JSON.stringify(newFile);\n      localStorage.setItem(fileId, stringData);\n    },\n    download(item = this.rightClickItem) {\n      if (this.currentSection == 'trash') return;\n      if (item.fileType == 'folder') return;\n      const decodeData = JSON.parse(localStorage.getItem(item.id));\n      var a = document.createElement('a');\n      a.href = decodeData.data;\n      a.setAttribute('download', item.name);\n      a.click();\n    },\n    activeUploadInput() {\n      if (this.currentSection != 'root') {\n        this.currentFolder = this.dataStorage.rootFolder;\n      }\n      this.$refs.fileInput.click();\n    },\n    moveToTrash(file = this.rightClickItem) {\n      if (this.currentSection == 'trash') return;\n      file.isInTrash = true;\n      this.dataStorage.trash.fileList.push(file);\n      const delFile = this.currentFolder.fileList.find(item => item.id == file.id);\n      const delFileIndex = this.currentFolder.fileList.indexOf(delFile);\n      this.currentFolder.fileList.splice(delFileIndex, 1);\n      //save to local\n      this.saveToLocalStorage();\n      this.saveToLocalTrash();\n    },\n    deleteFile(file = this.rightClickItem) {\n      const delFileIndex = this.dataStorage.trash.fileList.indexOf(file);\n      this.dataStorage.trash.fileList.splice(delFileIndex, 1);\n      localStorage.removeItem(file.id);\n      this.storage_usage = JSON.stringify(localStorage).length * 0.77;\n      //save to local\n      this.saveToLocalTrash();\n    },\n    recycleItem(item = this.rightClickItem) {\n      if (this.currentSection != 'trash') return;\n      ///讀取path\n      const pathArray = item.path.split('/');\n      //刪除根目錄及前方空白\n      pathArray.splice(0, 2);\n      var targetFolder;\n      if (pathArray.length == 0) {\n        //檔案於根目錄\n        targetFolder = this.dataStorage.rootFolder;\n      } else {\n        //檔案於子目錄\n        var current = this.dataStorage.rootFolder;\n        for (let i = 0; i < pathArray.length; i++) {\n          const childFolder = current.fileList.find(item => item.id == pathArray[i]);\n          current = childFolder;\n        }\n        targetFolder = current;\n      }\n      item.isInTrash = false;\n      targetFolder.fileList.push(item);\n      const indexOfDelItem = this.dataStorage.trash.fileList.indexOf(item);\n      this.dataStorage.trash.fileList.splice(indexOfDelItem, 1);\n      //save to local\n      this.saveToLocalStorage();\n      this.saveToLocalTrash();\n    },\n    _creatUuid() {\n      var d = Date.now();\n      if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n        d += performance.now(); //use high-precision timer if available\n      }\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n      });\n    },\n    fileContextMenu(item) {\n      this.rightClickItem = item;\n    },\n    addStar(item = this.rightClickItem) {\n      item.isStar = !item.isStar;\n      this.saveToLocalStorage();\n      this.saveToLocalTrash();\n      if (item.isStar) {\n        this.dataStorage.star.fileList.push(item);\n      } else {\n        const target = this.dataStorage.star.fileList;\n        const findObj = target.find(obj => obj.id == item.id);\n        const index = target.indexOf(findObj);\n        target.splice(index, 1);\n      }\n    },\n    starPage() {\n      this.currentFolder = this.dataStorage.star;\n    },\n    saveToLocalStorage() {\n      //save to LocalStorage\n      const storeData = JSON.stringify(this.dataStorage.rootFolder.fileList);\n      localStorage.setItem('myStorage', storeData);\n    },\n    saveToLocalTrash() {\n      //save to Local Trash\n      const trashData = JSON.stringify(this.dataStorage.trash.fileList);\n      localStorage.setItem('myTrash', trashData);\n    }\n  },\n  filters: {\n    timeFormat(timestamp) {\n      let date = new Date(timestamp);\n      let year = date.getFullYear();\n      let month = date.getMonth() + 1;\n      let day = date.getDate();\n      let hours = '0' + date.getHours();\n      let minutes = '0' + date.getMinutes();\n      let seconds = '0' + date.getSeconds();\n      return `${year}-${month}-${day} ${hours.substr(-2)}:${minutes.substr(-2)}:${seconds.substr(\n        -2\n      )}`;\n    },\n    sizeFormat(bytes, decimals = 1) {\n      if (isNaN(bytes) || !bytes) return '';\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const dm = decimals < 0 ? 0 : decimals;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n    }\n  },\n  created() {\n    this.currentFolder = this.dataStorage.rootFolder;\n    this.folderNav.push(this.dataStorage.rootFolder);\n    this.storage_usage = JSON.stringify(localStorage).length * 0.77;\n    const starFile = this.filterStarFile(this.dataStorage.rootFolder);\n    this.dataStorage.star.fileList = starFile;\n    const getStoreData = JSON.parse(localStorage.getItem('myStorage')) || [\n      {\n        id: '#1-f',\n        name: 'Hello World!',\n        editable: true,\n        isStar: false,\n        modifiedTime: 1598047432044,\n        size: '',\n        ownerId: 'me',\n        fileType: 'folder',\n        childrenFolder: [],\n        fileList: [],\n        path: '/root'\n      }\n    ];\n    const getTrashData = JSON.parse(localStorage.getItem('myTrash')) || [];\n    this.dataStorage.rootFolder.fileList = getStoreData;\n    this.dataStorage.trash.fileList = getTrashData;\n  },\n  mounted() {},\n  directives: {\n    'click-outside': {\n      bind: function (el, binding, vnode) {\n        el.clickOutsideEvent = function (event) {\n          const elName = el.getAttribute('el-name');\n          if (\n            !(el == event.target || el.contains(event.target)) &&\n            elName != event.target.getAttribute('bind-el')\n          ) {\n            vnode.context[binding.expression](event, el);\n          }\n        };\n        document.body.addEventListener('click', el.clickOutsideEvent);\n        document.body.addEventListener('contextmenu', el.clickOutsideEvent);\n      },\n      unbind: function (el) {\n        document.body.removeEventListener('click', el.clickOutsideEvent);\n        document.body.removeEventListener('contextmenu', el.clickOutsideEvent);\n      }\n    }\n  }\n});\n\n//雲端硬碟 右鍵選單\n$(function () {\n  $.contextMenu({\n    selector: '.table_contextmenu.root',\n    items: {\n      upload: {\n        name: '上傳檔案',\n        callback() {\n          vm.activeUploadInput();\n        }\n      },\n      createNewFolder: {\n        name: '新增資料夾',\n        callback() {\n          $('#newFolderModal').modal('show');\n        }\n      }\n    }\n  });\n});\n\n//檔案夾右鍵選單\n$(function () {\n  $.contextMenu({\n    selector: '.table_contextmenu.root .folder_type',\n    items: {\n      // share: { name: '共享' },\n      // download: {\n      //   name: '下載',\n      //   callback() {\n      //     vm.download();\n      //   }\n      // },\n      star: {\n        name: '標示星號',\n        callback() {\n          vm.addStar();\n        }\n      },\n      moveToTrash: {\n        name: '移至垃圾桶',\n        callback() {\n          vm.moveToTrash();\n        }\n      }\n    }\n  });\n});\n//檔案右鍵選單\n$(function () {\n  $.contextMenu({\n    selector: '.table_contextmenu.root .doc_type',\n    items: {\n      download: {\n        name: '下載',\n        callback() {\n          vm.download();\n        }\n      },\n      star: {\n        name: '標示星號',\n        callback() {\n          vm.addStar();\n        }\n      },\n      moveToTrash: {\n        name: '移至垃圾桶',\n        callback() {\n          vm.moveToTrash();\n        }\n      }\n    }\n  });\n});\n\n//垃圾桶檔案及檔案夾右鍵選單\n$(function () {\n  $.contextMenu({\n    selector: '.table_contextmenu.trash .doc_type , .table_contextmenu.trash .folder_type',\n    items: {\n      recycle: {\n        name: '還原',\n        callback() {\n          vm.recycleItem();\n        }\n      },\n      delete: {\n        name: '永久刪除',\n        callback() {\n          $('#deleteModal').modal('show');\n        }\n      }\n    }\n  });\n});\n"],"sourceRoot":""}